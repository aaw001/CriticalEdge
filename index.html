<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <title>CriticalEdge — Learn</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Tailwind CDN (class dark mode; no custom colors beyond neutrals) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config = { darkMode: ['class', '[data-theme="dark"]'] }</script>
</head>
<body class="bg-neutral-50 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 antialiased">
  <!-- Header -->
  <header class="border-b border-neutral-200 dark:border-neutral-800 bg-white/70 dark:bg-neutral-900/60 backdrop-blur">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between gap-4">
      <a href="/CriticalEdge/index.html" class="flex items-center gap-2">
        <img src="/CriticalEdge/assets/img/logo.svg" alt="CriticalEdge" class="h-9 w-9 rounded-xl" />
        <div>
          <div class="font-semibold">CriticalEdge</div>
          <div class="text-xs text-neutral-500 dark:text-neutral-400">Trauma &amp; Prehospital</div>
        </div>
      </a>
      <nav data-ce-nav class="flex items-center gap-2"><!-- nav injected --></nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
      <h1 class="text-3xl font-bold tracking-tight">Learn &amp; Practice</h1>
      <p class="mt-2 text-neutral-600 dark:text-neutral-300 max-w-2xl">
        Evidence-based micro-modules for prehospital & trauma clinicians. Select a module to start.
      </p>
    </div>
  </section>

  <!-- Modules grid (from JSON) -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
    <div id="modules-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
  </main>

  <!-- Footer -->
  <footer class="border-t border-neutral-200 dark:border-neutral-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 text-xs text-neutral-500 dark:text-neutral-400">
      © <span id="year"></span> CriticalEdge.
    </div>
  </footer>

  <!-- Nav + modules loader -->
  <script src="/CriticalEdge/assets/js/nav.js"></script>
  <script>
  const grid = document.getElementById('modules-grid');
  const year = document.getElementById('year'); year.textContent = new Date().getFullYear();

  async function loadModules() {
    const res = await fetch('/CriticalEdge/assets/data/modules.json', { cache: 'no-store' });
    const list = await res.json();
    grid.innerHTML = list.map(m => `
      <article class="bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl p-6 shadow-sm hover:shadow-md transition">
        <h2 class="font-semibold">${m.title}</h2>
        <p class="mt-2 text-sm text-neutral-600 dark:text-neutral-300">${m.minutes} • ${m.level}<br/>Audience: ${m.audience}</p>
        <div class="mt-4">
          <a href="/CriticalEdge/modules/${m.slug}.html"
             class="inline-flex items-center rounded-xl border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-900 px-3 h-10 text-sm hover:bg-neutral-50 dark:hover:bg-neutral-800">
            Open module →
          </a>
        </div>
      </article>
    `).join('');
  }
  loadModules();
  </script>
</body>
</html>
